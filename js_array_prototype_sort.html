<!DOCTYPE html>
<html lang="en">
    <head>
        <title>JS Array.prototype.sort() | Codey Luwak</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" type="image/x-icon" href="./img/keyboard-5-16.ico">
        <link rel="stylesheet" href="./style.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Barlow:ital,wght@0,400;0,700;1,400;1,700&family=Fira+Mono:wght@400;500;700&family=Roboto:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
    </head>

    <body>

        <header>
            <a href="./index.html"><h1>JavaScript: Array.prototype.sort()</h1></a>
            <nav id="navMenu"></nav>
        </header>

        <main class="js-notes">

            <article id="sort-basic">
                <h2>Array.prototype.sort() Basic</h2>

                <dl>
                    <dt><code>sort()</code></dt>
                    <dd>The <code>sort()</code> method sorts the elements of an array <b>in place</b> and returnes the sorted array.</dd>
                    <dd>
                        <div class="formula"><code>
                        sort(<span class="variable">compareFn</span>)
                        </code></div>
                    </dd>

                    <dd>
                        <ul>
                            <li><b>Sorting happens in original array</b><br>
                                It doesn't create a new array. Original array got sorted.
                            </li>
                            <li><b>Sort according to compare function</b></li>
                            
                            <li><b>Return original sorted array</b><br>
                                If assigned into a variable, be careful. The variable is only <b>a pointer</b> to the original array, not an actually new array. There's only 1 array by the end. The sorted original array.
                            </li>
                            <li><b>Variable assigned is only a pointer</b><br>
                                Assigned sort result to a new variable? Be careful, the new variable is only a pointer to the original array. No more than that. It's not a checked out state of the array.
                            </li>
                        </ul>
                    </dd>

                    <dt>Syntax</dt>                  
                    <dd><b>Parameter:</b> Compare function
                    </dd>
                    <dd>
<pre class="formula">
<span class="comment">// Functionless (default string sort)</span>
sort()

<span class="comment">// Compare function</span>
sort(<span class="variable">compareFn</span>)

<span class="comment">// Inline compare function</span>
sort(<span class="variable">function compareFn(a, b) {...}</span>)

<span class="comment">// Arrow function</span>
sort(<span class="variable">(a, b) => {...}</span>)
</pre>
                    </dd>

                    <dt>Compare function</dt>
                    <dd>
<pre class="formula">
function <span class="variable">compareFn</span>(<span class="variable">a, b</span>) {
    <span class="variable">...</span>
    return <span class="variable">number</span>;
}
<span class="comment">// Switch elements if return is positive.</span>
</pre>
                    </dd>

                    <dd>
                        <dl>
                            <dt>Parameters: <code>(a, b)</code></dt>
                            <dd>
                                <ul>
                                    <li><b><code>a</code></b> = first element</li>
                                    <li><b><code>b</code></b> = second element</li>
                                </ul>
                            </dd>
 
                            <dt>Return values:</dt>
                            <dd>
                                <ul>
                                    <li><b><code>&lt; 0</code></b> : sort a before b</li>
                                    <li><b><code>&gt; 0</code></b> : sort b before a</li>
                                    <li><b><code>= 0</code></b> : keep original order</li>
                                </ul>
                            </dd>      
                            
                            <dt>Remember:</dt>
                            <dd>
                                <ul>
                                    <li><b>Switch if positive!</b></li>
                                    <li>When it's negative or 0, it's already correct.</li>
                                </ul>
                            </dd>

                        </dl>
                    </dd>
                </dl>

                <a href="#top"><hr></a>
            </article>

            <article id="functionless-string-sort">
                <h2>Functionless string sort</h2>
                <dl>

                    <dt>Functionless <code>sort()</code>: "string sort"</dt>
                    <dd>When compare function omitted: <b>Sort according to UTF-16 code units order</b></dd>
                    <dd>
                        <ul>
                            <li>Elements are converted to strings</li>
                            <li>Strings are compared in UTF-16 code units order.</li>
                            <li>In general: 0-9, to A-Z, to a-z.</li>
                            <li>Element's convertion to string is only for sorting purpose. The actual array elements values remain whatever they were.</li>
                        </ul>
                    </dd>

                    <dt>Ascending string sort <code>["a", "b", "c", ...]</code></dt>
                    <dd>
                        <div class="formula"><code>
                        <span class="variable">array</span>.sort()
                        </code></div>
                    </dd>

                    <dt>Descending string sort <code>["z", "y", "x", ...]</code>.</dt>
                    <dd>
                        <div class="formula"><code>
                            <span class="variable">array</span>.sort().reverse()
                        </code></div>
                    </dd>

                </dl>

                <a href="#top"><hr></a>
            </article>

            <article id="numeric-sort">
                <h2>Numeric sort</h2>
                <dl>


                    <dt>Ascending numeric sort <code>[1, 2, 3, ...]</code></dt>
                    <dd>
                        <div class="formula"><code>
                            <span class="variable">array</span>.sort(<span class="variable">(a, b)</span> => <span class="variable">a - b</span>)
                        </code></div>
                    </dd>
                    <dd>Pseudocodes journey for <code>(a, b)</code>:
                        <ul>
                            <li>It needs switching only if b &lt; a</li>
                            <li>If <code>b &lt; a</code>, switch. 
                                <ul>
                                    <li><code>if (b &lt; a) {return 1}</code></li>
                                    <li><code>else {return -1}</code></li>
                                </ul>
                            </li>
                            <li>In ternary:
                                <ul>
                                    <li><code>b &lt; a? 1 : -1</code></li>
                                </ul>
                            </li>
                            <li>At this point, the code is becoming:<br>
                                <div class="formula-thin"><code>
                                    <span class="variable">array</span>.sort(<span class="variable">(a, b)</span> => <span class="variable">b &lt; a? 1 : -1</span>)
                                </code></div>
                            </li>
                            <li>But really, we want to say: <b>switch if <code>b &lt; a</code></b>
                                <ul>
                                    <li>Switch = return positive.</li>
                                    <li>How to make a positive value if <code>b &lt; a</code>? By returning <code>a - b</code>!</li>
                                    <li>Returning <code>a - b</code> means:
                                        <ul>
                                            <li>When <code>a &lt; b</code>, no switching needed. Return value is <code>negative</code>, a is placed before b as before.</li>
                                            <li>When <code>a = b</code>, no switching needed. Return value is <code>0</code>, a and b are put back as is.</li>
                                            <li>When <code>b &lt; a</code>, then they need to be switched. Return value is <code>positive</code>, then the <code>switching</code> happened.</li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li>Therefore, the code:<br>
                                <div class="formula-thin"><code>
                                    <span class="variable">array</span>.sort(<span class="variable">(a, b)</span> => <span class="variable">a - b</span>)
                                </code></div>
                            </li>
                        </ul>
                    </dd>

                    <dt>Descending numeric sort <code>[9, 8, 7, ...]</code></dt>
                    <dd>
                        <div class="formula"><code>
                            <span class="variable">array</span>.sort(<span class="variable">(a, b)</span> => <span class="variable">b - a</span>)
                        </code></div>
                    </dd>
                    <dd>Pseudocodes journey for <code>(a, b)</code>:
                        <ul>
                            <li>Similar, but now: <b>switch if <code>a &lt; b</code></b></li>
                            <li>Switch is if return is positive.</li>
                            <li>To make positive from a and b when a is smaller is: <code>b - a</code></li>
                            <li>Therefore, the code.</li>
                        </ul>
                    </dd>

                    <dt>String numbers</dt>
                    <dd>This sort will work even when numbers are written as string (between quotation marks), since JavaScript treated string numbers as numbers in mathematical operations.</dd>
                </dl>

                <a href="#top"><hr></a>
            </article>

            <article id="object-array-sort">
                <h2>Object array sort</h2>
                <dl>

                    <dt>Array example</dt>
                    <dd>
<pre class="js-codebox">
const array = [
    { name: "jen", age: 3 },
    { name: "Edi", age: 7 },
    { name: "Zed", age: 8 },
    { name: "abe", age: 5 }
];
</pre>
                    </dd>

                    <dt>Ascending sort based on age</dt>
                    <dd>
                        <ul>
                            <li>Just like in numeric sort</li>
                        </ul>
                    </dd>
                    <dd>
                        <div class="formula"><code>
                            <span class="variable">array</span>.sort(<span class="variable">(a, b)</span> => <span class="variable">a.age - b.age</span>)
                        </code></div>
                    </dd>
                    <dd>
<pre class="js-codebox">
array = [
    { name: "jen", age: 3 },
    { name: "abe", age: 5 },
    { name: "Edi", age: 7 },
    { name: "Zed", age: 8 }
];
</pre>
                    </dd>

                    <dt>Ascending sort based on name</dt>
                    <dd>
                        <ul>
                            <li>Unfortunately can't just use <code>a.name - b.name</code> because each of them is <code>NaN</code> and so is the result.</li>
                            <li>However <code>a.name</code> and <code>b.name</code> still can be compared using <code>&lt;</code>, <code>&gt;</code>, and <code>===</code>.</li>
                            <li>
                                <div class="formula-thin"><code>
                                    <span class="variable">array</span>.sort(<span class="variable">(a, b)</span> => <span class="variable">a.name > b.name? 1 : -1</span>)
                                </code></div>
                            </li>
                            <li>It works except it is case-sensitive.</li>
                            <li>To make it case insensitive, let's compare their lowerCase or upperCase values instead.</li>
<pre class="formula">
<span class="variable">array</span>.sort(<span class="variable">(a, b)</span> =>
    <span class="variable">a.name.toLowerCase() > b.name.toLowerCase()? 1 : -1</span>
)
</pre>
                        </ul>
                    </dd>
                    <dd>
                        
<pre class="js-codebox">
array = [
    { name: "abe", age: 5 },
    { name: "Edi", age: 7 },
    { name: "jen", age: 3 },  
    { name: "Zed", age: 8 }
];
</pre>
                    </dd>

                    <dt>Equal value and zero return</dt>
                    <dd>We can omit zero notion in return value for 2 possible reasons:
                        <ul>
                            <li>zero's if-condition is grouped with negative's if-condition, because both means the same thing: Don't switch.</li>
                            <li>It's okay if when zero's if-condition got accidentally grouped with positive's if-condition, because the 2 elements have identical value, and switching their position doesn't matter.</li>
                        </ul>
                    </dd>
                    <dd><b>Group the equal's if-condition with the negative's if condition for no switch</b><br>
                    However in more complicated array, for example object array, the array elements are more likely not identical. Their defining value could be equal, but the rest of the values could be different. In this case, we have to be careful grouping the equal if-condition with the negative if-condition if we don't want them to get switched.</dd>

                    <dd><b>Specified separately</b><br>
                    Or... it can be specified separately.</dd>

                    <dt>Sort stability</dt>
                    <dd>If equation is written properly, then now, after EcmaScript 2019, when defining value is equal, the order will remain the same. A stable sorting algorithm guarantees this. Before, they are not guaranted and the result can be switched.</dd>
                    <dd>When is this useful? Say you have an object array of student names and grades. The array is already in alphabetical order based on the student names. But now we want to sort it based on the grade first. Then of course name should be still in alphabetical order following the grade sort. In the past, they can come back shuffled. Original order not maintained.</dd>
                </dl>

                <a href="#top"><hr></a>
            </article>

            <article id="non-ascii-sort">
                <h2>Non-ASCII character sort</h2>

                <dl>
                   <dt><code>localeCompare()</code></dt>
                   <dd>
                        <div class="formula"><code>
                            <span class="variable">array</span>.sort(<span class="variable">(a, b)</span> => <span class="variable">a.localeCompare(b)</span>)
                        </code></div>
                    </dd>
                    <dd>
                    
<pre class="js-codebox">
array = ['réservé', 'premier', 'communiqué', 'café', 'adieu', 'éclair'];
array.sort((a, b) => a.localeCompare(b));
array;
// ['adieu', 'café', 'communiqué', 'éclair', 'premier', 'réservé']
</pre>
                    </dd>   
                </dl>

                <a href="#top"><hr></a>
            </article>

            <article id="sorting-with-map">
                <h2>Sorting with map</h2>
                
                <p>Future learning</p>>

                <a href="#top"><hr></a>
            </article>

            <article id="references">
                <h2>References</h2>
                <ul>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort" target="_blank">MDN: Array.prototype.sort()</a></li>
                </ul>
            </article>
        </main>
        <footer>
            <div class="nav-bar"><a href="./index.html" class="nav-button-rev" style="margin: auto">Home</a></div>
        </footer>
        <script src="./navArticle.js"></script>
    </body>
</html>

