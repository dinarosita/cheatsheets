<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Promise | JS CodeyLuwak</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" type="image/x-icon" href="./img/keyboard-5-16.ico">
        <link rel="stylesheet" href="./style.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Barlow:ital,wght@0,400;0,700;1,400;1,700&family=Fira+Mono:wght@400;500;700&family=Roboto:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
    </head>

    <body>

        <header>
            <a href="./index.html"><h1>JavaScript: Promise Object</h1></a>
            <nav id="navMenu"></nav>
        </header>

        <main class="js-notes">
            
            <article id="about-promise">
                <h2>Promise</h2>
                <dl>
                    <dt>About promise</dt>
                    <dd>Imagine we promise something will happen/completed in the future. There are 2 outcome from it: Fulfilled, or failed to fulfil it. What will happen next will depend on it. For example if fulfilled, we go ahead continuing the plan. If failed, then we will repeat some action to achieve it first, or goes to the plan B. But for now, we don't know which one we are going to do yet, since we don't know the promise will be fulfilled or not. We are planning ahead for both scenario for the future.</dd>
                    <dt>2 parts</dt>
                    <dd>
                        <ul>
                            <li><b>Promise</b>
                                <ul>
                                    <li>Pending...</li>
                                    <li>Outcome:
                                        <ul>
                                            <li>Fulfilled</li>
                                            <li>failed</li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li><b>Then</b>
                                <ul>
                                    <li>If fulfilled
                                        <ul>
                                            <li>Do this plan</li>
                                        </ul>
                                    </li>
                                    <li>If failed
                                        <ul>
                                            <li>Do different plan</li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>

                        </ul>
                    </dd>
                       
                    <dt>Syntax-ish</dt>
                    <dd>
<pre class="formula">
let <span class="variable">myPromise</span> = new Promise(<span class="weaker">(<span class="variable">myResolve</span>, <span class="variable">myReject</span>) => {
    <span class="comment">...</span>
    <span class="variable">myResolve();</span> 
    <span class="variable">myReject();</span> 
}</span>);

<span class="variable">myPromise</span>.then(<span class="variable">ResolvedFn</span>).catch(<span class="variable">FailedFn</span>);

</pre>
                    </dd>
                </dl>
                <a href="#top"><hr></a>
            </article>          
            
            
            <article id="javascript-info">
                <h2>Promise by Javascript-info</h2>
                <dl>
                    <dt>Producing code</dt>
                    <dd>A code that takes sometimes, might ends up succesful or failed.</dd>

                    <dt>Consuming code</dt>
                    <dd>Wants the result of the "producing code" once it's ready. Many functions may need that results.</dd>

                    <dt>Promise</dt>
                    <dd>A special Javascript object that links the "producing code" and the "consuming code".</dd>

                    <dt>How they are connected</dt>
                    <dd>Producing code takes whatever time it needs to produced the promised result.</dd>
                    <dd>Promise makes the result availlable to all the subscribed code when it's ready.</dd>

                    <dt>Constructor syntax for a promise object</dt>
                    <dd>
<pre class="formula">
<span class="thin">let <span class="variable">myPromise</span> = </span>new Promise(<span class="thin">function(<span class="variable">myResolve</span>, <span class="variable">myReject</span>) {<span class="variable">...</span>}</span>)
</pre>
                    </dd>
                </dl>
                <a href="#top"><hr></a>
            </article>          
            
            
            <article id="simple-example">
                <h2>Simple Example</h2>
                <dl>
                    <dt>Very simple example</dt>
                    <dd>Fulfilled promise</dd>
                    <dd>

<pre class="formula-thin">
let <span class="variable">myPromise</span> = <b>new Promise(</b><span class="codeblock">(<span class="variable">myResolve</span>, <span class="variable">myReject</span>)</span> => <span class="codeblock">{
    let a = 1 + 1;  <span class="comment">// always success</span>
    if (a == 2) {
        <span class="variable">myResolve</span>("Success");
    } else {
        <span class="variable">myReject</span>("Failed");
    }
}</span><b>)</b>

<span class="variable">myPromise</span><b>.then(</b><span class="codeblock">(<span class="variable">msg</span>)</span> => <span class="codeblock">{
    console.log("'Then' display message: " + <span class="variable">msg</span>)
}<b>).catch(</b>(<span class="variable">msg</span>) => {
    console.log("'Catch' display message: " + <span class="variable">msg</span>)
}</span><b>)</b>

<span class="comment">// 'Then' display message: Success</span>
</pre>
                    </dd>
                    <dd>Failed promise</dd>
                    <dd>
<pre class="formula-thin">
let <span class="variable">myPromise</span> = <b>new Promise(</b><span class="codeblock">(<span class="variable">myResolve</span>, <span class="variable">myReject</span>)</span> => <span class="codeblock">{
    let a = 1 + 2;  <span class="comment">// always fail</span>
    if (a == 2) {
        <span class="variable">myResolve</span>("Success");
    } else {
        <span class="variable">myReject</span>("Failed");
    }
}</span><b>)</b>

<span class="variable">myPromise</span><b>.then(</b><span class="codeblock">(<span class="variable">msg</span>)</span> => <span class="codeblock">{
    console.log("'Then' display message: " + <span class="variable">msg</span>)
}<b>).catch(</b>(<span class="variable">msg</span>) => {
    console.log("'Catch' display message: " + <span class="variable">msg</span>)
}</span><b>)</b>

<span class="comment">// 'Catch' display message: Failed</span>
</pre>
                    </dd>
                </dl>
                <a href="#top"><hr></a>
            </article>
           
            
            
            <article id="tutorial-video-example">
                <h2>Tutorial video example</h2>
                <dl>
                    <dt>Promise: Use watching tutorial video to the end</dt>
                    <dd>
                        <ul>
                            <li>Success if: User watches to the end.</li>
                            <li>Failed if:
                                <ul>
                                    <li>User left,</li>
                                    <li>User watching cat meme.</li>
                                </ul>
                            </li>
                        </ul>
                    </dd>

                    <dt>Using callbacks</dt>
                    <dd>
<pre class="formula-thin">
function <span class="variable">watchTutorialCallback</span>(<span class="variable">callback</span>, <span class="variable">errorCallback</span>) {
    <span class="codeblock">if (<span class="variable">userLeft</span>) {
        <span class="variable">errorCallback</span>({
            name: "User Left",
            message: ":("
        });
    } else if (<span class="variable">userWatchingCatMeme</span>) {
        <span class="variable">errorCallback</span>({
            name:"User Watching Cat Meme",
            message: "Cat over learning :("
        });
    } else {
        <span class="variable">callback</span>("Thumbs up and Subscribe")
    };</span>
};
</pre>
                    </dd>
                    <dd><b>User ends up watching to the end</b></dd>
                    <dd>
<pre class="formula-thin">
let <span class="variable">userLeft</span> = false;
let <span class="variable">userWatchingCatMeme</span> = false;

<span class="variable">watchTutorialCallback</span>((<span class="variable">message</span>) => {
    console.log("Success: " + <span class="variable">message</span>);
}, (<span class="variable">error</span>) => {
    console.log(<span class="variable">error.name</span> + ": " + <span class="variable">error.message</span>);
});

<span class="comment">// Success: Thumbs up and Subscribe</span>
</pre>
                    </dd>
                    <dd><b>If user left early</b></dd>
                    <dd>
<pre class="formula-thin">
<span class="variable">userLeft</span> = true;
<span class="variable">userWatchingCatMeme</span> = false;

<span class="comment">// Call the function, and result is:</span>
<span class="comment">// User Left: :(</span>
</pre>
                    </dd>


                    <dd><b>If user watches cat meme instead</b></dd>
                    <dd>
<pre class="formula-thin">
<span class="variable">userLeft</span> = false;
<span class="variable">userWatchingCatMeme</span> = true;

<span class="comment">// Call the function, and result is:</span>
<span class="comment">// User Watching Cat Meme: Cat over learning :(</span>
</pre>

                    </dd>

                    <dt>Using Promise function</dt>
                    <dd>
<pre class="formula-thin">
function <span class="variable">watchTutorialPromise</span>() {
    <span class="codeblock">return</span> <b>new Promise(</b>(<span class="variable">resolve</span>, <span class="variable">reject</span>) => {
        <span class="codeblock">if (<span class="variable">userLeft</span>) {
            <span class="variable">reject</span>({
                name: "User Left",
                message: ":("
            });
        } else if (<span class="variable">userWatchingCatMeme</span>) {
            <span class="variable">reject</span>({
                name:"User Watching Cat Meme",
                message: "Cat over learning :("
            });
        } else {
            <span class="variable">resolve</span>("Thumbs up and Subscribe")
        };</span>
    }<b>)</b>;
};
</pre>
                    </dd>
                    <dd><b>The <code>then</code> and <code>catch</code> function</b></dd>
                    <dd>
<pre class="formula-thin">
<span class="variable">watchTutorialPromise()</span><b>.then(</b>(<span class="variable">message</span>) => {
    <span class="codeblock">console.log("Success: " + <span class="variable">message</span>);</span>
}<b>).catch(</b>(<span class="variable">error</span>) => {
    <span class="codeblock">console.log(<span class="variable">error.name</span> + ": " + <span class="variable">error.message</span>);</span>
}<b>)</b>;
</pre>
                    </dd>

                    <dd><b>User ends up watching to the end</b></dd>
                    <dd>
<pre class="formula-thin">
<span class="variable">userLeft</span> = false;
<span class="variable">userWatchingCatMeme</span> = false;

<span class="comment">// Call the function, and result is:</span>
<span class="comment">// Success: Thumbs up and Subscribe</span>
</pre>
                    </dd>

                    <dd><b>If user left early</b></dd>
                    <dd>
<pre class="formula-thin">
<span class="variable">userLeft</span> = true;
<span class="variable">userWatchingCatMeme</span> = false;

<span class="comment">// Call the function, and result is:</span>
<span class="comment">// User Left: :(</span>
</pre>
                    </dd>

                    <dd><b>If user watches cat meme instead</b></dd>
                    <dd>
<pre class="formula-thin">
<span class="variable">userLeft</span> = false;
<span class="variable">userWatchingCatMeme</span> = true;

<span class="comment">// Call the function, and result is:</span>
<span class="comment">// User Watching Cat Meme: Cat over learning :(</span>
</pre>
                    </dd>
                </dl>
                <a href="#top"><hr></a>
            </article>           
            
            <article id="promise-all">
                <h2>Promise.all()</h2>
                <dl>
                    <dt>Running multiple promises is possible</dt>
                    <dt><code>Promise.all()</code></dt>
                    <dd>For when all of individual promises are fulfilled.</dd>
                    <dd>
<pre class="formula-thin">
const <span class="variable">recordVideoOne</span> = new Promise((<span class="variable">resolve</span>,<span class="variable">reject</span>) => {
    <span class="codeblock">resolve("Video 1 Recorded");</span>
});

const <span class="variable">recordVideoTwo</span> = new Promise((<span class="variable">resolve</span>,<span class="variable">reject</span>) => {
    <span class="codeblock">resolve("Video 2 Recorded");</span>
});

const <span class="variable">recordVideoThree</span> = new Promise((<span class="variable">resolve</span>,<span class="variable">reject</span>) => {
    <span class="codeblock">resolve("Video 3 Recorded");</span>
});

Promise.all([
    <span class="variable">recordVideoOne</span>,
    <span class="variable">recordVideoTwo</span>,
    <span class="variable">recordVideoThree</span>
]).then((<span class="variable">messages</span>) => {
    console.log(<span class="variable">messages</span>);
});

<span class="comment">// (3) ['Video 1 Recorded', 'Video 2 Recorded', 'Video 3 Recorded']</span>
</pre>
                    </dd>
                    <dt><code>Promise.race()</code></dt>
                    <dd>For when any of the promise is fulfilled.</dd>
                    <dd>
<pre class="formula-thin">
const <span class="variable">recordVideoOne</span> = new Promise((<span class="variable">resolve</span>,<span class="variable">reject</span>) => {
    <span class="codeblock">resolve("Video 1 Recorded");</span>
});

const <span class="variable">recordVideoTwo</span> = new Promise((<span class="variable">resolve</span>,<span class="variable">reject</span>) => {
    <span class="codeblock">resolve("Video 2 Recorded");</span>
});

const <span class="variable">recordVideoThree</span> = new Promise((<span class="variable">resolve</span>,<span class="variable">reject</span>) => {
    <span class="codeblock">resolve("Video 3 Recorded");</span>
});

Promise.race([
    <span class="variable">recordVideoOne</span>,
    <span class="variable">recordVideoTwo</span>,
    <span class="variable">recordVideoThree</span>
]).then((<span class="variable">message</span>) => {
    console.log(<span class="variable">message</span>);
});

<span class="comment">// Video 1 Recorded</span>
</pre>
                    </dd>
                </dl>
                <a href="#top"><hr></a>
            </article>
            
            <article id="settimeout">
                <h2>setTimeout()</h2>
                <dl>
                    <dt><code>setTimeout()</code></dt>
                    <dd>
<pre class="formula">
setTimeout(<span class="variable">function</span>, <span class="variable">milliseconds</span>, <span class="variable">...</span>)
</pre>
                    </dd>
                    <dd>This method calls a function after a number of milliseconds.</dd>
                    <dd>Arguments:
                        <ul>
                            <li>The function to execute (required)</li>
                            <li>The milliseconds (optional)</li>
                            <li>Other parameters need to be passed in (optional)</li>
                        </ul>
                    </dd>
                    <dd>Return value: id of the timer. Id is for use in <code>clearTimeout(id)</code> to cancel the timer.</dd>
                    <dd>
<pre class="formula">
<span class="variable">idName</span> = setTimeout(<span class="variable">function</span>, <span class="variable">milliseconds</span>);
clearTimeout(<span class="variable">idName</span>);
</pre>
                    </dd>
                    <dd></dd>
                    <dd>
<pre class="formula-thin">
const wait = time => new Promise((resolve) => setTimeout(resolve, time));

wait(3000).then(() => console.log('Hello!')); // 'Hello!'
</pre>
                    </dd>
                    <dt></dt>
                    <dd>
<pre class="formula-thin">

function promiseFn(myResolve) {}
    
function wait(time) {
    return new Promise(
        (resolve) => setTimeout(resolve,time)
    )
};

wait(3000).then(
    console.log("Hello!")
)
</pre>
                    </dd>
                </dl>
            
                <a href="#top"><hr></a>
            </article>
            
            <article id="references">
                <h2>References</h2>
                <ul>
                    <li><a href="https://javascript.info/promise-basics" target="_blank">Javascript.info: Promise</a></li>
                    <li><a href="https://www.w3schools.com/js/js_promise.asp" target="_blank">W3schools: JavaScript Promises</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank">MDN: Promise</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Using_promises" target="_blank">MDN: Using Promises</a></li>
                    <li><a href="https://www.youtube.com/watch?v=DHvZLI7Db8E" target="_blank">Web Dev Simplified (YouTube): JavaScript Promises In 10 Minutes</a></li>

                </ul>
            </article>
        </main>
        <footer>
            <div class="nav-bar"><a href="./index.html" class="nav-button-rev" style="margin: auto">Home</a></div>
        </footer>
        <script src="./navArticle.js"></script>
    </body>
</html>

