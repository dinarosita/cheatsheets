<!DOCTYPE html>
<html lang="en">
    <head>
        <title>this | JS CodeyLuwak</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" type="image/x-icon" href="./img/keyboard-5-16.ico">
        <link rel="stylesheet" href="./style.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Barlow:ital,wght@0,400;0,700;1,400;1,700&family=Fira+Mono:wght@400;500;700&family=Roboto:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
    </head>

    <body>

        <header>
            <a href="./index.html"><h1>JavaScript: Function "this" keyword</h1></a>
            <nav id="navMenu"></nav>
        </header>

        <main class="js-notes">                  
            <article id="this">
                <h2>This</h2>
                <dl>
                    <dt><code>this</code></dt>
                    <dd><code>this</code> keyword <b>refers</b> to an <b>object</b>.</dd>
                    <dd><b>Which object?</b> Depends on how <code>this</code> is being invoked/used/called.
                        <ul>
                            <li>In an object method: <code>this</code> refers to the <b>object</b>.</li>
                            <li>Alone: <code>this</code> refers to the <b>global object</b>.</li>
                            <li>In a function: <code>this</code> refers to the <b>global object</b>.</li>
                            <li>In a function in strict mode: <code>this</code> is <code>undefined</code>.</li>
                            <li>inan event: <code>this</code> refers to the <b>element</b> that received the event.</li>
                            <li>Methods like <code>call()</code>, <code>apply()</code>, and <code>bind()</code> can refer <code>this</code> to <b>any object</b>.</li>
                        </ul>
                    </dd>
                    <dd><code>this</code> is not a variable, it is a keyword. The value can't be changed.</dd>
                    <dd>
<pre class="formula-thin">
const <span class="variable">template</span> = [<span class="variable">template</span>];
</pre>
                    </dd>                                        
                </dl>
                <a href="#top"><hr></a>
            </article>

            <article id="method-this">
                <h2>"this" in a method</h2>

                <dl>
                    <dt>In an object method:</dt>
                    <dd><code>this</code> refers to the <b>object</b>.</dd>
                    <dd>
<pre class="formula-thin">
const <span class="variable">person</span> = {
    <span class="variable">firstName</span>   : <span class="variable">"John"</span>,
    <span class="variable">lastName</span>    : <span class="variable">"Doe"</span>,
    <span class="variable">id</span>          : <span class="variable">1234</span>,
    <span class="variable">fullName</span>    : function() {return <b>this</b>.<span class="variable">firstName + " " + </span><b>this</b>.<span class="variable">lastName</span>;}
};
</pre>
                    </dd>
                    <dd>In here: 
                        <ul>
                            <li><span class="variable">person</span> is an <b>object</b>.</li>
                            <li><span class="variable">fullName</span> is a method of the <span class="variable">person</span> <b>object</b>.</li>
                            <li><code>this</code> refers to the <span class="variable">person</span> <b>object</b>.</li>
                        </ul>
                    </dd>
                    <dd>Results</dd>
                    <dd>
<pre class="formula-thin">
<span class="variable">person</span>;    <span class="comment">// {firstName: 'John', lastName: 'Doe', id: 5566, fullName: ƒ}</span>
<span class="variable">person.fullName()</span>;      <span class="comment">// 'John Doe'</span>
</pre>
                    </dd>
                    
                </dl>
                <a href="#top"><hr></a>
            </article>

            <article id="alone-this">
                <h2>"this" alone</h2>

                <dl>
                    <dt>Alone:</dt>
                    <dd><code>this</code> refers to the <b>global object</b>.</dd>
                    <dd>
                        <ul>
                            <li>Alone is when <code>this</code> is in global scope.</li>
                            <li>The global object of browser window is <code>[object Window]</code></li>
                            <li>This is the same for strict and non-strict mode.</li>
                        </ul>
                    </dd>
                    <dd>
<pre class="formula-thin">
let <span class="variable">x</span> = <b>this</b>;
<span class="variable">x</span>;      <span class="comment">// Window</span>
</pre>
                    </dd>
                    <dd>Strict mode</dd>
                    <dd>
<pre class="formula-thin">
<b>"use strict"</b>
let <span class="variable">x</span> = <b>this</b>;
<span class="variable">x</span>;      <span class="comment">// Window</span>
</pre>
                    </dd>                   
                </dl>
                <a href="#top"><hr></a>
            </article>
            <article id="function-this">
                <h2>"this" in a function</h2>

                <dl>
                    <dt>In a function: </dt>
                    <dd>
                        <ul>
                            <li><b>Default</b> binding for <code>this</code> is to the <b>global object</b>
                                <ul>
                                    <li>The global object of browser window is <code>[object Window]</code></li>
                                </ul>
                            </li>
                            <li><b>Strict mode</b> doesn't allow default binding: <code>this</code> is <code>undefined</code>.</li>
                        </ul>
                    </dd>
                    <dd>
<pre class="formula-thin">
function <span class="variable">defaultF</span> () { return <b>this</b>; }
<span class="variable">defaultF()</span>;   <span class="comment">// Window</span>
</pre>
                    </dd>
                    <dd>Strict mode</dd>
                    <dd>
<pre class="formula-thin">
<b>"use strict"</b>
function <span class="variable">strictF</span> () { return <b>this</b>; }
<span class="variable">strictF()</span>;    <span class="comment">// undefined</span>
</pre>
                    </dd>                   
                </dl>
                <a href="#top"><hr></a>
            </article>

            <article id="event-handler-this">
                <h2>"this" in HTML event handlers</h2>

                <dl>
                    <dt>In HTML event handlers: </dt>
                    <dd><code>this</code> refers to the <b>HTML element</b> that received the event.</dd>
                    <dd>
                        <button onclick="this.style.backgroundColor='pink'">
                            Pink me up!
                        </button>
                    </dd>
                    <dd>Code</dd>
                    <dd>
<pre class="formula-thin">
&lt;button onclick="<b>this</b>.style.backgroundColor='pink'"&gt;
    Pink me up!
&lt;/button&gt;
</pre>
                    </dd>    
                </dl>
                <a href="#top"><hr></a>
            </article>

            <article id="object-method-binding">
                <h2>Object method binding</h2>

                <dl>
                    <dt>Object method binding</dt>                    <dd>Back to the example above: <code>this</code> is the <b>person object</b>.</dd>
                    <dd>
<pre class="formula-thin">
const <span class="variable">person</span> = {
    <span class="variable">firstName</span>   : <span class="variable">"John"</span>,
    <span class="variable">lastName</span>    : <span class="variable">"Doe"</span>,
    <span class="variable">id</span>          : <span class="variable">1234</span>,
    <span class="variable">whatIsThis</span>  : function() {return <b>this</b>;},
    <span class="variable">fullName</span>    : function() {return <b>this</b>.<span class="variable">firstName + " " + </span><b>this</b>.<span class="variable">lastName</span>;}
};
</pre>
                    </dd>
                    <dd><b>this</b>.<span class="variable">firstName</span> is the <span class="variable">firstName</span> property of <b>this</b> (the person object).</dd>
                    <dd>
<pre class="formula-thin">
<span class="variable">person</span>;               <span class="comment">// {firstName: 'John', lastName: 'Doe', id: 1234, whatIsThis: ƒ, fullName: ƒ}</span>
<span class="variable">person.whatIsThis()</span>;  <span class="comment">// {firstName: 'John', lastName: 'Doe', id: 1234, whatIsThis: ƒ, fullName: ƒ}</span>
<span class="variable">person.fullName()</span>;    <span class="comment">// 'John Doe'</span>
</pre>
                    </dd>
                </dl>
                <a href="#top"><hr></a>
            </article>

            <article id="call-method">
                <h2>Explicit function binding</h2>
                <h3>Call and apply methods</h3>

                <dl>
                    <dt>Explicit function binding</dt>
                    <dd>
                        <ul>
                            <li><code>call()</code></li>
                            <li><code>apply()</code></li>
                            <li>These methods call an object method and use it with another object as argument.</li>
                        </ul>
                    </dd>   

                    <dt><code>call()</code></dt>
                    <dd>It calls an object method and use it with another object as argument.</dd>
                    <dd>
<pre class="formula">
<span class="variable">object1.method1</span>()                 <span class="comment">// Calling function 1</span>    
<span class="variable">object1.method1</span>.call(<span class="variable">object2</span>)     <span class="comment">// Calling function 1 but on object 2</span>
</pre>
                    </dd>       
                    <dt><code>call()</code> example:</dt>
                    <dd>
<pre class="formula-thin">
const <span class="variable">person1</span> = {
    <span class="variable">fullName</span>: function() {
        return <b>this</b>.<span class="variable">firstName + " " +</span> <b>this</b>.<span class="variable">lastName</span>;
    }
}

const <span class="variable">person2</span> = {
    <span class="variable">firstName</span>: <span class="variable">"John"</span>,
    <span class="variable">lastName</span>: <span class="variable">"Doe"</span>,
}

<span class="variable">person1.fullName</span><b>.call(</b><span class="variable">person2</span><b>);</b>     <span class="comment">// "John Doe"</span>
</pre>
                    </dd>    
                    <dd>Breakdown and result:
                        <ul>
                            <li><code class="formula-thin">person1.fullName()</code>
                                <ul>
                                    <li><code>this</code> refers to <code class="variable">person1</code> object.</li>
                                    <li><code>this.<span class="variable">firstName</span></code> and <code>this.<span class="variable">lastName</span></code>
                                        <ul>
                                    <li><code>this</code> refers to <code class="variable">person1</code> object.</li>
                                    <li><code class="variable">person1</code> object doesn't have <code class="variable">firstName</code> and <code class="variable">lastName</code> properties.</li>
                                    <li><code class="variable">person2</code> object <b>does</b> have the <code class="variable">firstName</code> and <code class="variable">lastName</code> properties.</li>
                                    <li><code class="variable">person2</code> object has to be called: <code class="formula-thin">.call(<span class="variable">person2</span>)</code>, replacing <code class="formula-thin">()</code></li>


                                        </ul>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </dd>
                    <dd>
<pre class="formula-thin">
// <span class="variable">person1.fullName</span><b>()</b>
//                 <b>.call(</b><span class="variable">person2</span><b>)</b>
// <span class="variable">person1.fullName</span><b>.call(</b><span class="variable">person2</span><b>);</b>     <span class="comment">// "John Doe"</span>
</pre>
                    </dd>
                </dl>
                <a href="#top"><hr></a>
            </article>

            <article id="bind-method">
                <h2>Function borrowing</h2>
                <h3>Bind methods</h3>

                <dl>
                    <dt><code>bind()</code></dt>
                    <dd>With bind method, an object can borrow a method from another object.
                    </dd>
                    <dd>
<pre class="formula">
<span class="variable">object1.method1</span>                 <span class="comment">// is function 1</span>    
<span class="variable">object1.method1</span>.bind(<span class="variable">object2</span>)   <span class="comment">// is function 1 bound to object 2</span>
</pre>
                    </dd>
                    
                    <dd>Getting the function and return value:</dd>
                    <dd>
<pre class="formula">
<span class="variable">object1.method1</span>()     <span class="comment">// Calling function 1</span>

const <span class="variable">method2</span> = <span class="variable">object1.method1</span>.bind(<span class="variable">object2</span>);
<span class="comment">// Assigning function 1 that is bound to object 2 into a new function</span>

<span class="variable">method2</span>               <span class="comment">// is function 2</span>
<span class="variable">method2</span>()             <span class="comment">// Calling function 2</span>
</pre>
                    </dd>
                    
                    <dt><code>call()</code> vs <code>bind()</code></dt>
                    <dd>
<pre class="formula">
<span class="variable">object1.method1</span>      <span class="comment">// is function 1</span>
<span class="variable">object1.method1</span>()    <span class="comment">// Calling function 1</span>

<span class="variable">object1.method1</span>.call(<span class="variable">object2</span>)  <span class="comment">// Calling function 1 on object 2</span>
<span class="variable">object1.method1</span>.bind(<span class="variable">object2</span>)  <span class="comment">// is function 1 bound to object 2</span>

let <span class="variable">method2</span> = <span class="variable">object1.method1</span>.bind(<span class="variable">object2</span>);
<span class="comment">// Assigning function 1 that is bound to object 2 into a new function</span>

<span class="variable">method2</span>      <span class="comment">// is function 2</span>
<span class="variable">method2</span>()    <span class="comment">// Calling function 2</span>
</pre>
                    </dd>
                    <dd>Similarities:
                        <ul>
                            <li>Allowing a method of an object to be used with a <b>different object</b></li>
                        </ul>
                    </dd>

                    
                    <dd>Differences:
                        <ul>
                            <li><code>call</code>: <b>Calling</b> a method to be <b>executed</b>. Result: the <b>return value</b> and other consequences of the code being executed.</li>
                            <li><code>bind</code>: <b>Creating</b> a new method, but <b>not to execute</b>. Result: a <b>new function</b>.</li>
                        </ul>
                    </dd>

                    <dt><code>bind()</code> example</dt>
                    <dd>
<pre class="formula-thin">
const <span class="variable">person1</span> = {
    <span class="variable">firstName</span>: <span class="variable">"John"</span>,
    <span class="variable">lastName</span>: <span class="variable">"Doe"</span>,
    <span class="variable">fullName</span>: function() {
        return <b>this</b>.<span class="variable">firstName + " " +</span> <b>this</b>.<span class="variable">lastName</span>;
    }
}

const <span class="variable">person2</span> = {
    <span class="variable">firstName</span>: <span class="variable">"Michael"</span>,
    <span class="variable">lastName</span>: <span class="variable">"Scott"</span>,
}

let <span class="variable">fullName2</span> = <span class="variable">person1.fullName</span><b>.bind(</b><span class="variable">person2</span><b>);</b>

<span class="variable">person1.fullName</span>();     <span class="comment">// "John Doe"</span>  
<span class="variable">fullName2</span>();            <span class="comment">// "Michael Scott"</span>
</pre>
                    </dd>
                </dl>
                <a href="#top"><hr></a>
            </article>
            
            
            <article id="this-precedence">
                <h2>this precedence</h2>

                <dl>
                    <dt>Which object <code>this</code> refers to? Use this order of precedence</dt>
                    <dd>
                        <ol>
                            <li><code>bind()</code></li>
                            <li><code>call()</code> and <code>apply()</code></li>
                            <li>Object method</li>
                            <li>Global scope</li>
                        </ol>
                    </dd>
                    
                </dl>
                <a href="#top"><hr></a>
            </article>


            <article id="references">
                <h2>References</h2>
                <ul>
                    <li><a href="https://www.w3schools.com/js/js_this.asp" target="_blank">w3schools: JS this</a></li>
                </ul>
            </article>
        </main>
        <footer>
            <div class="nav-bar"><a href="./index.html" class="nav-button-rev" style="margin: auto">Home</a></div>
        </footer>
        <script src="./navArticle.js"></script>
    </body>
</html>

