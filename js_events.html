<!DOCTYPE html>
<html lang="en">
    <head>
        <title>JS Events</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="./style.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Barlow:ital,wght@0,400;0,700;1,400;1,700&family=Fira+Mono:wght@400;500;700&family=Roboto:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
    </head>
    <body>

        <!--Clickable Page Title-->
        <a href="./index.html"><h1>JavaScript</h1></a>        
        <h2>Events</h2>

        <p><strong>An event:</strong> a signal that something has happened.</p>

        <p>Some most useful DOM Events:</p>
        <ul>
            <li>Mouse Events
                <ul>
                    <li><code>click</code></li>
                    <li><code>contextmenu</code> (right click)</li>
                    <li><code>mouseover</code> and <code>mouseout</code></li>
                    <li><code>mousedown</code> and <code>mouseup</code></li>
                    <li><code>mousemove</code></li>
                </ul>
            </li>
            <li>Keyboard events
                <ul>
                    <li><code>keydown</code> and <code>keyup</code></li>
                </ul>
            </li>
            <li>Form element events
                <ul>
                    <li><code>submit</code></li>
                    <li><code>focus</code></li>
                </ul>
            </li>
            <li>Document Events
                <ul>
                    <li><code>DOMContentLoaded</code></li>
                </ul>
            </li>
            <li>CSS events
                <ul>
                    <li><code>transitioned</code></li>
                </ul>
            </li>
        </ul>
        
        <p>First, let's take a look at basic <code>&ltinput&gt </code>element and function within <code>&ltscript&gt</code> to put event handler into context.</p>
                
        <!--Input element-->
        <a href="#top"><hr></a>
        <h3>Input element</h3>

        <div class="formula">
            <code>
                &ltinput type="<span class="variable">the-type</span>" 
                value="<span class="variable">the-label</span>" 
                on<span class="code2">event</span>="<span class="parameter">the-action</span>"&gt
            </code>
        </div>

        <p>Attributes:</p>
        <ul>
            <li><code>type</code>
                <ul>
                    <li>The type of the element box.</li>
                    <li><code>button</code>, <code>submit</code>, and <a href="https://www.w3schools.com/tags/att_input_type.asp#:~:text=input%20type%3D%22value%22%3E-,Attribute%20Values,-Value" target="_blank">more</a>.</li>
                </ul>
            </li>
            <li><code>value</code>
                <ul>
                    <li>The label/message on the element box.</li>
                </ul>
            </li>
            <li><code>on<span class="code2">event</span></code>
                <ul>
                    <li>The event handler.</li>
                    <li>Action to be triggered. Example:
                        <ul>
                            <li><code>"alert('Greetings!')"</code></li>
                            <li><code>"functionName()"</code> -- with function detailed in <code>&ltscript&gt</code></li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>

        <p>HTML attributes are not case-sensitive, but usually lowercases are used. DOM Property is case-sensitive.</p>

        <!--Event Handlers-->
        <a href="#top"><hr></a>
        <h3>Event Handlers</h3>      

        <p><strong>A handler:</strong> a function that runs in case of an event.</p>

        <p>There are 3 ways to assign event handlers:</p>
        
        <ul>
            <li><strong>HTML-attributes</strong>
                <ul>
                    <li><code>onclick = "..."</code></li>
                    <li>Not usually a choice because JavaScript in the middle of HTML tag looks a bit odd and can't write a lot of codes there.</li>
                </ul>
            </li>
            <li><strong>DOM property</strong>
                <ul>
                    <li><code>elementName.onclick = function</code></li>
                    <li>Sometimes a choice. But it's limited 1 one handler function per event.</li>
                </ul>
            </li>
            <li><strong>Methods</strong>
                <ul>
                    <li><code>elementName.addEventListener(event, handler, [phase])</code> and <code>elementName.removeEventListener(event, handler, [phase])</code></li>
                    <li>Most flexible even though a bit long to write.</li>
                    <li>Some events can only be assigned this way</li>
                </ul>
            </li>
        </ul>

        <!--HTML-attributes-->
        <a href="#top"><hr></a>
        <h2>HTML-attributes</h2>

        <div class="formula">
            <code>
                on<span class="code2">event</span>
            </code>
        </div>
        <br>
        <div class="formula">
            <code>
                &ltinput
                <span class="variable">...</span> 
                on<span class="code2">event</span>="<span class="parameter">the-action</span>"&gt
            </code>
        </div>

        <p>A handler can be set with an attribute named <code>on<span class="code2">event</span></code>. For example:</p>
        <ul>
            <li><code>click</code> handler: <code>onclick</code></li>
        </ul>

        <p><span class="alert">Note:</span> We will use <code><strong>onclick</strong></code> a lot to illustrate <code>on<span class="code2">event</span></code> in this note.</p>

        <p>Example:</p>

<pre class="js-codebox">
&ltinput type="button" value="Click me" onclick="alert('It works!')"&gt
</pre>
        
        <input type="button" value="Click me" onclick="alert('It works!')">


        <!--DOM Property-->
        <a href="#top"><hr></a>
        <h2>DOM Property</h2>

        <div class="formula">
            <code>
                &ltinput 
                <span class="variable">...</span>
                id="<span class="variable">idName</span>" 
                &gt
            </code>
        </div>

        <div class="formula">
            <code>
                <span class="variable">idName</span>.on<span class="code2">event</span>
            </code>
        </div>

        <p>A handler can be assign using a DOM property <code>on<span class="code2">event</span></code>.</p>

        <p>Example:</p>

<pre class="js-codebox">
&ltinput type="button" value="Click me" id="handler"&gt

&ltscript&gt
    handler.onclick = function() {
        alert('This also works!');
    };
&lt/script&gt
</pre>

            <input type="button" value="Click me" id="handler">
        </div>

        <script>
        handler.onclick = function() {
            alert('This also works!');
        };
        </script>

        <!--HTML-attributes works like DOM property-->
        <a href="#top"><hr></a>
        <h3>HTML-attributes works like DOM property</h3>

        <div class="formula" style="font-weight: normal;">
            <code>
                &ltinput <strong>type</strong>="<strong>button</strong>" <strong>onclick</strong>="<span class="variable" style="font-weight: bold;">whatever here</span>" ...&gt
            </code>
        </div>
        <br>

        <div class="formula" style="font-weight: normal;">
            <code>
                &ltinput <strong>type</strong>="<strong>button</strong>" <strong>id</strong>="<strong>button</strong>" ...&gt<br>
                &ltscript&gt<br>
                    <strong><span class="tab">button.onclick = function() {</span><br>
                        <span class="variable tab2" style="font-weight: bold;">whatever here</span>;<br>
                    <span class="tab">}</span></strong><br>
                &lt/script&gt<br>
            </code>
        </div>

        <p>When a handler is assigned using HTML-attributes, actually the browser creates a new function from the attribute content and writes it to the DOM property.</p>
        
<pre class="js-codebox">
&ltinput type="button" onclick="alert('Yippie!')" value="Click here"&gt
</pre>            
        <input type="button" onclick="alert('Yippie!')" value="Click here">

        <p>The HTML attribute is used to initialize <code>button.onclick</code>. It's the same with:</p>

<pre class="js-codebox">
&ltinput type="button" id="button" value="Click here"&gt
&ltscript&gt
    button.onclick = function() {
        alert('Yippie!');
    }
&lt/script&gt
</pre>

        <input type="button" id="button" value="Click here">
        <script>
            button.onclick = function() {
                alert('Yippie too!');
            }
        </script>   


        <!--Function-->
        <a href="#top"><hr></a>
        <h3>Function</h3>

        <div class="formula">
            <code>
                    function <span class="variable">functionName</span>() {<span class="variable">code block</span>}
            </code>
        </div>

        <div class="formula">
            <code>
                <span class="variable">functionName</span> = function() {<span class="variable">code block</span>}
            </code>
        </div>

        <p>A function can be assigned like above. <code>()</code> is where arguments are listed. It can be empty if there's no arguments.</p>

        <div class="formula">
            <code>
                <span class="variable">functionName</span>
            </code>
        </div>

        <div class="formula">
            <code>
                <span class="variable">newVar</span> = <span class="variable">functionName</span>
            </code>
        </div><br>

        <p>To see the value (description/formulation) of a function, we are using <code>functionName</code> without the brackets <code>()</code>. Imagine this is how we do to check primitive variables value too. If we assigning it to a new variable <code>newVar</code>, newVar will now contain the same function as <code>functionName</code>. So without bracket, the function will be assigned/declared. Not run. This is what we are using when we assigning a function to an event handler. We just want to assign the function to the handler. Not to run the function and assign its return value to the handler (which will be <code>undefined</code> if the function doesn't have a return value.)</p>

        <div class="formula">
            <code>
                <span class="variable">functionName</span>()
            </code>
        </div>

        <div class="formula">
            <code>
                <span class="variable">newVar</span> = <span class="variable">functionName</span>()
            </code>
        </div>

        <p>To run the function, use the brackets: <code>functionName()</code>. It will return a return value or <code>undefined</code> if there's no return value. If we are assigning it to a new variable <code>newVar</code>, then newVar value will be that return value (or <code>undefined</code>) instead of assigning the function formulation. The function will be run when loading the page in order to give newVar the return value needed.</p>

        <h4>Assigning function to DOM Property</h4>

        <div class="formula">
            <code>
                <span class="variable">idName</span>.onclick = <span class="variable">functionName</span>
            </code>
        </div>

        <p><span class="alert">Important:</span> Pay attention to <code>functionName</code> vs <code>functionName()</code> when assigning existing function to event handler. Like in example below, make sure <code>thanksButton.onclick</code> is <code>sayThanks</code>, instead of <code>sayThanks()</code>.</p>
                
<pre class="js-codebox">
&ltinput type="button" value="Thank you button" id="thanksButton"&gt
&ltscript&gt
    function sayThanks() {
        alert('Thank you!');
    }

    thanksButton.onclick = sayThanks;
&lt/script&gt
</pre>

        <input type="button" value="Thank you button" id="thanksButton">
        <script>
            function sayThanks() {
                alert('Thank you!');
            }

            thanksButton.onclick = sayThanks;
        </script>

        <h4>Assigning function to HTML-attribute</h4>

        <div class="formula" style="font-weight: normal;">
            <code>
                &ltinput type="button" onclick="<span class="variable">functionName()</span> ...&gt
            </code>
        </div>
        <br>
        <div class="formula" style="font-weight: normal;">
            <code>
                &ltinput type="button" id="button" ...&gt<br>
                &ltscript&gt<br>
                    <span class="tab">button.onclick = function() {</span><br>
                        <span class="variable tab2">functionName()</span>;<br>
                    <span class="tab">}</span><br>
                &lt/script&gt<br>
            </code>
        </div>

        <p>In the other way around, use <code>functionName()</code> for assignment of HTML-attribute handler, because it's essentially going to be rewritten in such way from HTML to Script.</p>

<pre class="js-codebox">
&ltinput type="button" value="Tombol Makasih" onclick="makasih()"&gt
&ltscript&gt
    function makasih() {
        alert('Terima kasih!');
    }
&lt/script&gt
</pre>

        <input type="button" value="Tombol Makasih" onclick="makasih()">
        <script>
            function makasih() {
                alert('Terima kasih!');
            }
        </script>

        <!--Using both HTML-attributes and DOM property-->
        <a href="#top"><hr></a>
        <h3>Using both HTML-attributes and DOM property</h3>

        <p>Because only one action/function can happen per event, when both are used, the later one (DOM property on <code>&ltscript&gt;</code>) will overwrite the HTML-attribute.</p>

<pre class="js-codebox">
&ltinput type="button" id="handler2" onclick="alert('First')" value="Click here"&gt
&ltscript&gt
    handler2.onclick = function() {
        alert('Second');
    }
&lt/script&gt
</pre>

        <input type="button" id="handler2" onclick="alert('First')" value="Click here">
        <script>
            handler2.onclick = function() {
                alert('Second');
            }
        </script>

        <!--Remove handler-->
        <a href="#top"><hr></a>
        <h3>Remove handler</h3>

        <div class="formula">
            <code>
                <span class="variable">idName</span>.onclick 
                = null;
            </code>
        </div>

        <p>To remove a handler, assign <code>null</code>.</p>

<pre class="js-codebox">
handler2.onclick = null;
</pre>

        <!--Accessing the element: this-->
        <a href="#top"><hr></a>
        <h3>Accessing the element: this</h3>

        <div class="formula"><code>this</code></div>

        <p>It's possible for a handler to access the element it's on. It's by using <code>this</code>.</p>

        <p>Example:</p>

<pre class="js-codebox">
&ltbutton onclick="alert(`Button name: ${this.innerHTML}`)"&gtKitten&lt/button&gt
</pre>
        <button onclick="alert(`Button name: ${this.innerHTML}`)">Kitten</button>

        <!--addEventListener-->
        <a href="#top"><hr></a>
        <h2>addEventListener</h2>

        <div class="formula">
            <code>
                <span class="variable">element</span>.addEventListener
                (<span class="variable">event</span>, <span class="variable">handler</span>, [<span class="variable">options</span>]);
            </code>
        </div>

        <div class="formula">
            <code>
                <span class="variable">element</span>.removeEventListener
                (<span class="variable">event</span>, <span class="variable">handler</span>, [<span class="variable">options</span>]);
            </code>
        </div>

        <p>Problem with previous way, we can't assign multiple handlers to 1 event. The later handler will overwrite the earlier one. Special methods <code>addEventListener</code> and <code>removeEventListener</code> allow multiple handler assignments.</p>

        <ul>
            <li><code>addEventListener</code>: adding a handler</li>
            <li><code>removeEventListener</code>: removing a handler</li>
        </ul>

        <p>The components:</p>
        <ul>
            <li><strong>Event</strong>: event name, for example <code>"click"</code></li>
            <li><strong>Handler</strong>: the handler <strong>function</strong></li>
            <li><strong>Options</strong>: an additional optional object with properties:
                <ul>
                    <li><code><strong>once</strong></code>: if <code>true</code>, the listener is automatically removed after it triggers.</li>
                    <li><code><strong>capture</strong></code>: the phase where to handle the event. Also <code>false/true</code>historically, that's the same as <code>{capture: false/true}</code> Further explanation: <a href="https://javascript.info/bubbling-and-capturing" target="_blank">bubbling and capturing</a>.</li>
                    <li><code><strong>passive</strong></code>: if <code>true</code>, the handler will not call <code>preventDefault()</code>. Further explanation: <a href="https://javascript.info/default-browser-action" target="_blank">browser default actions</a>.</li>
                </ul>
            </li>
        </ul>

        <h4>Removal's handler</h4>
        <p><span class="alert">Important:</span> Removal requires the <strong>same function</strong> as the assignment. Function must be passed as a <strong>variable</strong>.</p>      

        <p>The right way:</p>

<pre class="js-codebox">
function handler() {
    alert("Kitten");
}

input.addEventListener("click", handler);
// ...
input.removeEventListener("click", handler);
</pre>

        <p>If not, even though we are using the same code, it will be different function object, and removal will fail. Example:</p>

<pre class="js-codebox">
input.addEventListener("click", () => alert("Kitten"));
// ...
input.removeEventListener("click", () => alert("Kitten"));
// The removal doesn't work
</pre>

        <h4>Multiple handlers</h4>

        <p>DOM property and <code>addEventListener</code> can be used together to assign handlers, even though typically only one way is used, and some handlers only work with <code>addEventListener</code></p>

<pre class="js-codebox">
&ltinput id="countInput" type="button" value="Counting button"&gt

&ltscript&gt
    function countTwo() {
        alert("Two");
    };

    function countThree() {
        alert("Three")
    }

    countInput.onclick = () => alert("One");
    countInput.addEventListener("click", countTwo);
    countInput.addEventListener("click", countThree);
&lt/script&gt
</pre>

        <input id="countInput" type="button" value="Counting button">

        <script>
            function countTwo() {
                alert("Two");
            };
        
            function countThree() {
                alert("Three")
            }
        
            countInput.onclick = () => alert("One");
            countInput.addEventListener("click", countTwo);
            countInput.addEventListener("click", countThree);
        </script>

        <h4>More universal</h4>

        <p>There are some events that can only be assigned using <code>addEventListener</code>. It can't be assigned using DOM property. For example, <code>DOMContentLoaded</code> event that triggers when the document is loaded and DOM is built. 
        </p>

        <!--Sandbox-->
        <a href="#top"><hr></a>
        <h3>Sandbox</h3>

<pre class="js-codebox">
//code
</pre>
        
        <!--Footer, don't change below-->
        <a href="#top"><hr></a>

        <p>References:</p>
        
        <ul>
            <li><a href="https://javascript.info/introduction-browser-events" target="_blank">JavaScript.info: Introduction to Browser Events</a></li>
            <li><a href="https://www.w3schools.com/tags/att_input_type.asp#:~:text=input%20type%3D%22value%22%3E-,Attribute%20Values,-Value" target="_blank">w3schools: &ltinput&gt type attribute values</a></li>
        </ul>      

        <div class="nav-bar"><a href="./index.html" class="nav-button-rev" style="margin: auto">Home</a></div>
    </body>
</html>

