<!DOCTYPE html>
<html lang="en">
  <head>
    <title>React useState</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/x-icon" href="./img/keyboard-5-16.ico" />
    <link rel="stylesheet" href="./style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Barlow:ital,wght@0,400;0,700;1,400;1,700&family=Fira+Mono:wght@400;500;700&family=Roboto:ital,wght@0,400;0,700;1,400;1,700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!--Clickable Page Title-->
    <header>
      <a href="./index.html"><h1>React Hook: useState</h1></a>
      <nav id="navMenu"></nav>
    </header>

    <main class="react_notes">
        
        <article id="useState">

            <h2>useState</h2>
            <p><code>useState</code> is a hook used for managing states in react. Other hook for managing states:</p>
            <ul>
                <li><code>useReducer</code></li>
            </ul>
            
            <ul>
                <li>
                    Must be used directly in the main body in component function. Top
                    level.
                </li>
                <li>
                    Multiple useState can be used, but must be in the same order of
                    calling each time.
                </li>
                <li>Can't be called conditionally</li>
                <li>Can't be inside class.</li>
                <li>Can't be nested or put in any wrapper.</li>
            </ul>

            <p></p>
            
            <h3>My learning project</h3>
            <ul>
                <li>
                        <ahref="https://www.youtube.com/watch?v=O6P86uwfdR0"
                        target="_blank">Web Dev: Learn useState In 15 Minutes</a>
                </li>
                <li><a href="https://dinarosita.github.io/react-hooks" target="_blank">My learning</a></li>
            </ul>
            <a href="#top"><hr></a>
            </article>
        <article id="syntax">

            <h2>Syntax</h2>

            <h3>Import from react</h3>
            <pre class="formula">import <span class="variable">{ useState }</span> from <span class="variable">react</span>;</pre>    
            
            <h3>Function useState</h3>

            <p><code>useState()</code> is a function.</p>
            <pre class="formula">const [<span class="variable">state</span>, <span class="variable">setState</span>] = useState(<span class="variable">defaultState</span>)</pre>

            <h4>Argument</h4>
            <p>Argument: <code>(defaultState)</code></p>
            
            <p>Meaning the default state is 4. In our counter example, it will start at 4.</p>

            <h4>Returns</h4>
            <p>Always returns 2 values: <code>[state, setState]</code></p>
            <ul>
                <li><code>state</code>: The <strong>current state</strong> at every iteration of our render function.</li>
                <li><code>setState</code>: The <strong>function that updates</strong> the current state.
                </li>
            </ul>
            
            <p>Not caught as an array, but destructured in line.</p>
                
            <ul>
                <li>Don't write: <code>const arr = useState(4);</code></li>
                <li>
                    Write:
                    <code>const [count, setCount] = useState(4)</code>
                </li>
            </ul>

            <h3>Trigger function</h3>

<pre class="formula">
function <span class="variable">triggerFn</span>() {
    <span class="variable">setState</span>(<span class="variable">prevState</span> => <span class="variable"> ... prevState ... </span>);
}
</pre>
            <p>Include trigger function for calling the <code>setState</code> function. Essentialy trigerring the rerendering of the component.</p>

            <h3>Calling the trigger function</h3>
<pre class="formula">
return (
    ...
    &lt;button onclick={<span class="variable">triggerFn</span>}&gt;<span class="variable">Text</span>&lt;/button&gt;
    ...
)
</pre>
            <p>Make the function available for trigerring. For example, if it's a button, by using <code>onclick</code> on the html side.</p>
                        
            <h3>Example app.js</h3>
<pre class="formula-thin">
import <span class="variable">React, { useState }</span> from <span class="variable">"react"</span>;

function <span class="variable">App</span>() {
    const [<span class="variable"><b>count</b></span>, <span class="variable"><b>setCount</b></span>] = <span class="variable"><b>useState</b></span>(<span class="variable">4</span>);

    function <span class="variable">decrementCount</span>() {
        <span class="variable"><b>setCount</b></span>(prevCount => prevCount - 1);
    }

    function <span class="variable">incrementCount</span>() {
        <span class="variable"><b>setCount</b></span>(prevCount => prevCount + 1);
    }</span>

    return (
        &lt;div&gt;
            &lt;button onClick={<span class="variable">decrementCount</span>}</span>&gt;<span class="variable">-</span>&lt;/button&gt;
            &lt;span&gt;{<span class="variable"><b>count</b></span>}&lt;/span&gt;
            &lt;button onClick={<span class="variable">incrementCount</span>}</span>&gt;<span class="variable">+</span>&lt;/button&gt;
        &lt;/div&gt;
    );
}

export default <span class="variable">App</span>;
</pre>
            <p>Life rendering: <a href="https://dinarosita.github.io/react-hooks" target="_blank">My learning project</a>. Initial state looks like this:</p>
<pre class="formula-thin" style="font-size: 2rem;">
<button style="font-size: 2rem;">-</button>4<button style="font-size: 2rem;">+</button>
</pre>

<p>Everytime we click <code>+</code> or <code>-</code> button, we call <code>incrementCount</code> or <code>decrementCount</code> function. From inside either function, <code>setCount</code> function is called. Essentialy this is our update state function. our component is rerendered with the new value of our count.</p>

<p>In class component, same thing happens with <code>setState</code>.</p>

            <p>Explanations</p>
        <ul>
          <li>Use <code>onClick</code> on the buttons, with functions describe what the buttons need to do.</li>
          <li>If <code>setCount</code> will be used more than once and each time the new count value will be used in the next one, be sure to use  the "function version" in the <code>setCount</code>. the function within will take those intermediary values, instead of the original count value. The same with setting state inside class.
            <ul>
                <li>Rather than: <br>
<pre class="formula-thin">
function decrementCount() { 
    setCount(count - 1) 
}</pre></li>
                <li>Write it like this: <br>
<pre class="formula-thin">
function decrementCount() { 
    setCount(prevCount => prevCount - 1) 
}</pre></li>
                <li>Why? In above, the count value doesn't get updated while still inside the operation. in the case setCount is conducted twice in row, each time it will recall initial count value.</li>
                <li>For example if we want to trigger 2 decrements each time button is clicked.</li>
                <li>This will decrement by only 1<br>
<pre class="formula-thin">
function decrementCount() { 
    setCount(count - 1) 
    setCount(count - 1) 
}</pre></li>
                <li>This will decrement by 2<br>
<pre class="formula-thin">
function decrementCount() { 
    setCount(prevCount => prevCount - 1) 
    setCount(prevCount => prevCount - 1) 
}</pre></li>
            </ul>
            </li>          
        </ul>

        <a href="#top"><hr></a>
        </article>
        <article id="initial_value">

        <h2>The initial value</h2>
        <ul>
            <li>Directly
                <ul>                   
                    <li>If we hardcode it, it will run every single time we run our function. Every time we render our component. Not much matter if it's "4". But if it's a complex math, for example fib, it can slow down performance of our app.</li>
                    <li><code>const [count, setCount] = useState(4)</code></li>
                    <li><code>const [count, setCount] = useState(fibb)</code></li>
                </ul>
            </li>
            <li>As an arrow function
                <ul>
                    <li>If it is written as an arrow function, it will be executed only once. This is the best way.
                        <ul>
                            <li><code>const [count, setCount] = useState(() => {...code...})</code></li>
                            <li>or</li>
                            <li><code>function countInitial() {...code...}</code><br>
                            <code>const [count, setCount] = useState(() => countInitial())</code></li>
                        </ul>
                    </li>
                </ul>
                </li>
                    
                    <li>If the function code is written separately and called instead, it will be like the first case. It will run every single time and if this is a long complicated execution, it might slow down the performance.
                        <ul>                            
                            <li><code>const [count, setCount] = useState(countInitial())</code></li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
        <a href="#top"><hr></a>
        </article>
        <article id="object_initial_value">

        <h2>Initial value is an object</h2>
        <p>In class component, if we are updating just 1 property of the initial value, we only need to return that property. The other property that's not updated will still be there. In function component, if we return only some in our <code>useState</code> function, then the whole object is turning into only have those properties. The rest will be missing. So make sure to include the unchanged properties too, even when the value is the same. Easiest way to include all properties is to return <code>{ ...prevState, changedProp: newVal }</code></p>
<pre class="formula-thin">
import React, { useState } from "react";

function App() {
  const [state, setState] = useState({ count: 4, theme: "blue" });
  const count = state.count;
  const theme = state.theme;

  function decrementCount() {
    <b>setState(prevState =&gt; {        
      return { ...prevState, count: prevState.count - 1 };
    });</b>
  }

  function incrementCount() {
    <b>setState(prevState =&gt; {
        return { ...prevState, count: prevState.count - 1 };</b>
    });
  }

  return (
    &lt;div&gt;
      &lt;button onClick={decrementCount}&gt;-&lt;/button&gt;
      &lt;span&gt;{count} {theme}&lt;/span&gt;
      &lt;button onClick={incrementCount}&gt;+&lt;/button&gt;
    &lt;/div&gt;
  );
}

export default App;

        </pre>
        <a href="#top"><hr></a>
        </article>
        <article id="multiple_hooks">
            <h2>Multiple hooks</h2>

        <p>Better way to approach this is, by using multiple <code>useState</code> hooks for individual changed properties.</p>

<pre class="formula-thin">
import React, { useState } from "react";

function App() {
    const [count, setCount] = useState({ 4 });
    const [theme, setTheme] = useState({ "blue" });

    function decrementCount() {
        <b>setCount(prevCount =&gt; prevCount - 1 )</b>
    }

    function incrementCount() {
        <b>setCount(prevCount =&gt; prevCount + 1 )</b>
        <b>setTheme("red")</b>
    }

    return (
    &lt;div&gt;
        &lt;button onClick={decrementCount}&gt;-&lt;/button&gt;
        &lt;span&gt;{count} {theme}&lt;/span&gt;
        &lt;button onClick={incrementCount}&gt;+&lt;/button&gt;
    &lt;/div&gt;
    );
}

export default App;

</pre>
<p>This is a grat feature of <code>useState</code>. Making it easy to manage.</p>

        </article>
 
        
    </main>
    <footer>
      <a href="#top" class="nav-button-rev" style="margin: auto">Top</a>
      <a href="./index.html" class="nav-button-rev" style="margin: auto"
        >Home</a
      >
    </footer>
    <script src="./navArticle.js"></script>
  </body>
</html>
